@model Library.Web.ViewModels.EditLibraryItemViewModel

@using (Html.BeginForm("Edit", "LibraryItem"))
{
    <div>
        <div asp-validation-summary="All" class="text-danger"></div>
        <ol>
            <li>
                @Html.LabelFor(m => m.NonDigitalMediaItem.Title)
                @Html.TextBoxFor(m => m.NonDigitalMediaItem.Title)
                <span asp-validation-for="NonDigitalMediaItem.Title" class="text-danger"></span>
            </li>
            <li>
                @Html.LabelFor(m => m.NonDigitalMediaItem.Author)
                @Html.EditorFor(m => m.NonDigitalMediaItem.Author)
                <span asp-validation-for="NonDigitalMediaItem.Author" class="text-danger"></span>
            </li>
            <li>
                @Html.LabelFor(m => m.NonDigitalMediaItem.Pages)
                @Html.EditorFor(m => m.NonDigitalMediaItem.Pages)
                <span asp-validation-for="NonDigitalMediaItem.Pages" class="text-danger"></span>
            </li>
            <li>
                @Html.LabelFor(m => m.LibraryItemType)
                <select asp-for="NonDigitalMediaItem.NonDigitalMediaItemType" asp-items="@Html.GetEnumSelectList<NonDigitalMediaItemType>()"></select>
            </li>
            <li>
                @Html.LabelFor(m => m.Categories.FirstOrDefault().CategoryName)
                @Html.DropDownListFor(m => m.NonDigitalMediaItem.CategoryId, new SelectList(Model.Categories, "Id", "CategoryName"))
            </li>

            @if (Model.NonDigitalMediaItem.Borrower != null)
            {
                <li>
                    @Html.LabelFor(m => m.NonDigitalMediaItem.Borrower)
                    @Html.TextBoxFor(m => m.NonDigitalMediaItem.Borrower)
                    <span asp-validation-for="NonDigitalMediaItem.Borrower" class="text-danger"></span>
                </li>
                <li>
                    @Html.LabelFor(m => m.NonDigitalMediaItem.BorrowDate)
                    @Model.NonDigitalMediaItem.BorrowDate
                </li>
            }
        </ol>

        @if (Model.NonDigitalMediaItem.IsBorrowable)
        {
            <div>
                <p>To borrow this item, please enter borrower and click "Check Out"</p>
                @Html.LabelFor(m => m.NonDigitalMediaItem.Borrower)
                @Html.EditorFor(m => m.NonDigitalMediaItem.Borrower)
                <input type="submit" name="submit" value="Check Out" />
                <span class="text-danger">@Html.ValidationMessage("BorrowerError")</span>
            </div>
        }

        else if (Model.NonDigitalMediaItem.ItemType != LibraryItemType.ReferenceBook)
        {
            <div>
                <p>Return this item by clicking button:</p>
                <input type="submit" name="submit" value="Check In" />
            </div>
        }

        @for (int i = 0; i < Model.Categories.Count; i++)
        {
            @Html.HiddenFor(model => Model.Categories[i].CategoryName)
            @Html.HiddenFor(model => Model.Categories[i].Id)
        }

        @Html.HiddenFor(m => m.NonDigitalMediaItem.Id)
        @Html.HiddenFor(m => m.NonDigitalMediaItem.IsBorrowable)
        @Html.HiddenFor(m => m.NonDigitalMediaItem.BorrowDate)
        @Html.HiddenFor(m => m.NonDigitalMediaItem.Borrower)

        <input type="hidden" name="mediaItemCategory" value="@MediaItemCategory.NonDigitalMedia" />
        <input type="submit" name="submit" value="Edit" />
    </div>
}